using System.Net.Mime;
using System.Text;

namespace Mod3ASPNET
{
     public class HtmlResult : IResult // IResult est une interface de Microsoft.AspNetCore.Http, qui permet de retourner un résultat HTTP dans ASP.NET Core. Ici, nous le personalisons sous forme du type 'HtmlResult' pour retourner du HTML.
     {
          // ==================================================================================================================================================
          //                                                                                                                                                  !
          //                                                                 Fields                                                                           !
          //                                                                                                                                                  !
          // ==================================================================================================================================================
          // Create fields ------------------------------------------------------------------------------------------------------------------------------------
          private readonly string _html;





          // ==================================================================================================================================================
          //                                                                                                                                                  !
          //                                                                Constants                                                                         !
          //                                                                                                                                                  !
          // ==================================================================================================================================================





          // ==================================================================================================================================================
          //                                                                                                                                                  !
          //                                                                Properties                                                                        !
          //                                                                                                                                                  !
          // ==================================================================================================================================================





          // ==================================================================================================================================================
          //                                                                                                                                                  !
          //                                                                  Indexers                                                                        !
          //                                                                                                                                                  !
          // ==================================================================================================================================================





          // ==================================================================================================================================================
          //                                                                                                                                                  !
          //                                                                   Events                                                                         !
          //                                                                                                                                                  !
          // ==================================================================================================================================================





          // ==================================================================================================================================================
          //                                                                                                                                                  !
          //                                                                 Constructors                                                                     !
          //                                                                                                                                                  !
          // ==================================================================================================================================================
          public HtmlResult(string p_html)
          {
               _html = p_html;

          }





          // ==================================================================================================================================================
          //                                                                                                                                                  !
          //                                                              Synchronous methods                                                                 !
          //                                                                                                                                                  !
          // ==================================================================================================================================================






          // ==================================================================================================================================================
          //                                                                                                                                                  !
          //                                                             Asynchronous methods                                                                 !
          //                                                                                                                                                  !
          // ==================================================================================================================================================
          public async Task ExecuteAsync(HttpContext httpContext)
          {
               httpContext.Response.ContentType        = MediaTypeNames.Text.Html;                                                                              // retourne "text/html". Pour connaître les différents 'ContentType' -> Google : 'contenttype html'
               httpContext.Response.ContentLength      = Encoding.UTF8.GetByteCount(_html);                                                                     // retourne la taille du contenu HTML en octets afin que le navigateur soit plus performant. Pour connaître les différents 'Encoding' -> Google : 'encoding html' 

               await httpContext.Response.WriteAsync(_html);
          }





          // ==================================================================================================================================================
          //                                                                                                                                                  !
          //                                                         Standard operators redefined                                                             !
          //                                                                                                                                                  !
          // ==================================================================================================================================================
          // Unary operators ----------------------------------------------------------------------------------------------------------------------------------



          // Binary operators ---------------------------------------------------------------------------------------------------------------------------------



          // Conversion operators -----------------------------------------------------------------------------------------------------------------------------





          // ==================================================================================================================================================
          //                                                                                                                                                  !
          //                                                           Standard methods redefined                                                             !
          //                                                                                                                                                  !
          // ==================================================================================================================================================
          // ToString() ---------------------------------------------------------------------------------------------------------------------------------------



          // Equals() -----------------------------------------------------------------------------------------------------------------------------------------



          // HashCode() ---------------------------------------------------------------------------------------------------------------------------------------





          // ==================================================================================================================================================
          //                                                                                                                                                  !
          //                                                                  Nested types                                                                    !
          //                                                                                                                                                  !
          // ==================================================================================================================================================





          // ==================================================================================================================================================
          //                                                                                                                                                  !
          //                                                                    Finalizer                                                                     !
          //                                                                                                                                                  !
          // ==================================================================================================================================================
          // Unmanaged resources ------------------------------------------------------------------------------------------------------------------------------
     }
}
